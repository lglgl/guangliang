## 1. 业务系统
### 1.1.功能

### 1.2.部署节点

### 1.3.性能要求



## 2. 中间件集群



| node1          | node2          | node3       | node4       | node5       | node6       | node7 | node8 |
| -------------- | -------------- | ----------- | ----------- | ----------- | ----------- | ----- | ----- |
| esticsearch    | esticsearch    | esticsearch | esticsearch | esticsearch | esticsearch |       |       |
| zookeeper      | zookeeper      | zookeeper   | zookeeper   | zookeeper   | zookeeper   |       |       |
| kafka          | kafka          | kafka       | kafka       | kafka       | kafka       |       |       |
| nacos          | nacos          | nacos       | nacos       | nacos       | nacos       |       |       |
| redis          | redis          | redis       | redis       | redis       | redis       |       |       |
| minIO          | minIO          | minIO       | minIO       | minIO       | minIO       |       |       |
| nginx          | nginx          |             |             |             |             |       |       |
| **MySQL**      | **MySQL**      |             |             |             |             |       |       |
| **keepalived** | **keepalived** |             |             |             |             |       |       |
|                |                |             |             |             |             |       |       |



### 2.1.esticsearch

### 2.2.zookeeper

### 2.3.kafka

依赖关系：zookeeper

### 2.4.nacos

依赖关系：MySQL

### 2.5.redis



### 2.6.minIO

### 2.7.nginx





## 3.数据库部署

### 3.1.双主一从

### 3.2.高可靠

### 3.3.数据备份









## 4.部署计划

### 4.1.docker迁移

### 4.2.网络配置



### 4.3.组网验证

### 4.4.压力测试











## 5.监控系统

### 5.1.监控部署



| node1    | node2    | node3    | node4    | node5    | node6    | node7        | node8        |
| -------- | -------- | -------- | -------- | -------- | -------- | ------------ | ------------ |
| exporter | exporter | exporter | exporter | exporter | exporter | exporter     | exporter     |
|          |          |          |          |          |          | Prometheus   | Prometheus   |
|          |          |          |          |          |          | Alertmanager | Alertmanager |
|          |          |          |          |          |          | Grafana      | Grafana      |



### 5.2.设备监控

CPU使用率

内存使用率

磁盘使用率

进程状态

网络延迟

网络丢包率

### 5.3.服务监控

url

进程





### 5.4.日志收集

| node1    | node2    | node3    | node4    | node5    | node6    | node7         | node8         |
| -------- | -------- | -------- | -------- | -------- | -------- | ------------- | ------------- |
| filebeat | filebeat | filebeat | filebeat | filebeat | filebeat | filebeat      | filebeat      |
|          |          |          |          |          |          | elasticsearch | elasticsearch |
|          |          |          |          |          |          | kibana        | kibana        |
|          |          |          |          |          |          | kafka         | kafka         |



### 5.1.日志目录清单



### 5.2.日志搜索

### 5.3.日志归档



### 5.4.定期清理

定期清理计划



## 6.性能评估

### 6.1.网络性能

网络带宽承载





### 6.2.中间件性能

### 6.3.应用性能





## 7.应急预案

### 7.1.网络故障

### 7.2.主机故障

### 7.3.程序异常

### 7.4.人员应急

运维操作需至少同时两人了解。





## 8.备份计划

### 8.1.数据备份

数据库

图片

日志

### 8.2.程序备份

版本备份





### 8.3.文档备份

运维文档

